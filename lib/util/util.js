'use strict';function _0x38eb(){const _0x35374a=['fromPublicKeyHash','\x20attempt\x20','hash','21796920CNkjRs','getLpCostAddress','toHex','378IrMxmg','jyRJF','create','BufferReader','toBuffer','tbc-lib-js','log','thOzT','toString','cxgsb','1108419OIaKcB','AJugJ','CKYuq','__setModuleDefault','4Mjzldf','jHnhO','MyLEW','Unreachable\x20code','readUInt64LEBN','QUQUb','__createBinding','Address','dGgCG','prototype','ISdWZ','hbgnc','XJrwQ','buildFtPrePreTxData','OpFNO','1299928OVEpgU','355909OUlQdL','Number\x20must\x20more\x20than\x20or\x20equal\x200','outputs','OP_','__esModule','getOwnPropertyNames','Number\x20must\x20be\x20less\x20than\x20256','script','Transaction\x20with\x20ID\x20','push','floor','TuBqs','0000000000000000','call','\x20items)','27onrQVy','selectTXfromLocal','\x20failed:','length','TBAQC','padStart','tugMn','getPrePreTxdata','SYOPc','uyOKW','TaXyZ','Processing\x20','from','API\x20call','jbFBm','\x20does\x20not\x20exist\x20in\x20the\x20transaction.','GEmxG','warn','readBigUInt64LE','KvBTj','360936tUWXUr','Output\x20at\x20index\x20','defineProperty','writable','getOpCode','substring','satoshis','sLBiy','hex','FDXRT','inputs','subarray','getLpCostAmount','1351096sGzoLJ','GqsRI','configurable','get','TWNXq','getOwnPropertyDescriptor','encoding','isLock','hasOwnProperty','default','xsSxJ','oxoaH','81380fFyJEQ'];_0x38eb=function(){return _0x35374a;};return _0x38eb();}function _0x1391(_0x45730a,_0x2f8dd6){const _0x38eb88=_0x38eb();return _0x1391=function(_0x139193,_0x2a8fcf){_0x139193=_0x139193-0xb9;let _0x3cdd87=_0x38eb88[_0x139193];return _0x3cdd87;},_0x1391(_0x45730a,_0x2f8dd6);}const _0x34e6d5=_0x1391;(function(_0x2cac4f,_0x572846){const _0x4c3964=_0x1391,_0x2c6fa8=_0x2cac4f();while(!![]){try{const _0x198cde=-parseInt(_0x4c3964(0x104))/0x1*(-parseInt(_0x4c3964(0xf4))/0x2)+parseInt(_0x4c3964(0xf0))/0x3+-parseInt(_0x4c3964(0xc6))/0x4+-parseInt(_0x4c3964(0xdf))/0x5*(-parseInt(_0x4c3964(0xe6))/0x6)+parseInt(_0x4c3964(0x103))/0x7+-parseInt(_0x4c3964(0xd3))/0x8*(-parseInt(_0x4c3964(0x113))/0x9)+-parseInt(_0x4c3964(0xe3))/0xa;if(_0x198cde===_0x572846)break;else _0x2c6fa8['push'](_0x2c6fa8['shift']());}catch(_0x5a0d79){_0x2c6fa8['push'](_0x2c6fa8['shift']());}}}(_0x38eb,0x812de));var __createBinding=this&&this[_0x34e6d5(0xfa)]||(Object[_0x34e6d5(0xe8)]?function(_0x532a9a,_0x15f84e,_0x44ba87,_0x3b052c){const _0x5650cf=_0x34e6d5,_0x59ae32={'GEmxG':function(_0x5a937f,_0x35c3ae){return _0x5a937f===_0x35c3ae;},'jHnhO':function(_0x501775,_0x55f4ae){return _0x501775 in _0x55f4ae;},'gQsTl':_0x5650cf(0xd6)};if(_0x59ae32[_0x5650cf(0xc2)](_0x3b052c,undefined))_0x3b052c=_0x44ba87;var _0x3c48f6=Object[_0x5650cf(0xd8)](_0x15f84e,_0x44ba87);(!_0x3c48f6||(_0x59ae32[_0x5650cf(0xf5)](_0x59ae32['gQsTl'],_0x3c48f6)?!_0x15f84e[_0x5650cf(0x108)]:_0x3c48f6[_0x5650cf(0xc9)]||_0x3c48f6[_0x5650cf(0xd5)]))&&(_0x3c48f6={'enumerable':!![],'get':function(){return _0x15f84e[_0x44ba87];}}),Object[_0x5650cf(0xc8)](_0x532a9a,_0x3b052c,_0x3c48f6);}:function(_0x5c4f67,_0xe6fb99,_0xc4aa27,_0xf63f43){if(_0xf63f43===undefined)_0xf63f43=_0xc4aa27;_0x5c4f67[_0xf63f43]=_0xe6fb99[_0xc4aa27];}),__setModuleDefault=this&&this[_0x34e6d5(0xf3)]||(Object[_0x34e6d5(0xe8)]?function(_0x1c7255,_0x321236){const _0x36d97f=_0x34e6d5,_0x7634c2={'bzjaj':_0x36d97f(0xdc)};Object[_0x36d97f(0xc8)](_0x1c7255,_0x7634c2['bzjaj'],{'enumerable':!![],'value':_0x321236});}:function(_0x16dee1,_0x4e2b9c){const _0x561e2b={'WvVcA':'default'};_0x16dee1[_0x561e2b['WvVcA']]=_0x4e2b9c;}),__importStar=this&&this['__importStar']||(function(){const _0x14fdbd={'tugMn':function(_0xed85f0,_0x181419){return _0xed85f0(_0x181419);},'TBAQC':function(_0x3a85f3,_0x1b9a81){return _0x3a85f3<_0x1b9a81;},'dGgCG':function(_0x3f3731,_0xc99196){return _0x3f3731!==_0xc99196;},'QUQUb':function(_0x3425af,_0x5263d5,_0x4dd43e,_0x370b30){return _0x3425af(_0x5263d5,_0x4dd43e,_0x370b30);}};var _0x4e27f9=function(_0x52a76f){const _0x1ac15f=_0x1391;return _0x4e27f9=Object[_0x1ac15f(0x109)]||function(_0x2bc3bf){const _0x54cc4c=_0x1ac15f;var _0x1af45e=[];for(var _0x3ea5bc in _0x2bc3bf)if(Object[_0x54cc4c(0xfd)][_0x54cc4c(0xdb)][_0x54cc4c(0x111)](_0x2bc3bf,_0x3ea5bc))_0x1af45e[_0x1af45e['length']]=_0x3ea5bc;return _0x1af45e;},_0x14fdbd[_0x1ac15f(0x119)](_0x4e27f9,_0x52a76f);};return function(_0x144e09){const _0x5576ac=_0x1391;if(_0x144e09&&_0x144e09[_0x5576ac(0x108)])return _0x144e09;var _0x4b19db={};if(_0x144e09!=null){for(var _0x5268a3=_0x4e27f9(_0x144e09),_0x64546=0x0;_0x14fdbd[_0x5576ac(0x117)](_0x64546,_0x5268a3[_0x5576ac(0x116)]);_0x64546++)if(_0x14fdbd[_0x5576ac(0xfc)](_0x5268a3[_0x64546],'default'))_0x14fdbd[_0x5576ac(0xf9)](__createBinding,_0x4b19db,_0x144e09,_0x5268a3[_0x64546]);}return __setModuleDefault(_0x4b19db,_0x144e09),_0x4b19db;};}());Object['defineProperty'](exports,_0x34e6d5(0x108),{'value':!![]}),exports['buildUTXO']=buildUTXO,exports[_0x34e6d5(0x101)]=buildFtPrePreTxData,exports[_0x34e6d5(0x114)]=selectTXfromLocal,exports['getFtBalanceFromTape']=getFtBalanceFromTape,exports['fetchInBatches']=fetchInBatches,exports['fetchWithRetry']=fetchWithRetry,exports[_0x34e6d5(0xca)]=getOpCode,exports[_0x34e6d5(0xe4)]=getLpCostAddress,exports[_0x34e6d5(0xd2)]=getLpCostAmount,exports[_0x34e6d5(0xda)]=isLock;const tbc=__importStar(require(_0x34e6d5(0xeb))),ftunlock_1=require('./ftunlock');function buildUTXO(_0x1dcdda,_0x2af428,_0x538d65){const _0x5ca76e=_0x34e6d5,_0x432c9a={'dmYdz':function(_0x5b6f5e,_0x305a1d){return _0x5b6f5e===_0x305a1d;},'SXAPY':function(_0x5c1647,_0x13ffa2){return _0x5c1647(_0x13ffa2);},'uvSrA':function(_0x26a51f,_0x53b652){return _0x26a51f+_0x53b652;}};let _0x1d79f0;_0x432c9a['dmYdz'](_0x538d65,!![])?_0x1d79f0=_0x432c9a['SXAPY'](getFtBalanceFromTape,_0x1dcdda[_0x5ca76e(0x106)][_0x432c9a['uvSrA'](_0x2af428,0x1)][_0x5ca76e(0x10b)]['toHex']()):_0x1d79f0=0x0n;const _0x44c429=_0x1dcdda[_0x5ca76e(0x106)][_0x2af428];if(!_0x44c429)throw new Error(_0x5ca76e(0xc7)+_0x2af428+_0x5ca76e(0xc1));return{'txId':_0x1dcdda[_0x5ca76e(0xe2)],'outputIndex':_0x2af428,'script':_0x44c429[_0x5ca76e(0x10b)][_0x5ca76e(0xe5)](),'satoshis':_0x44c429[_0x5ca76e(0xcc)],'ftBalance':_0x1d79f0};}function buildFtPrePreTxData(_0xde1b5a,_0x1a4962,_0x3d90b2){const _0x355a96=_0x34e6d5,_0x5d8e21={'ISdWZ':_0x355a96(0xce),'hbgnc':function(_0x20e39b,_0x430009){return _0x20e39b-_0x430009;},'xsSxJ':function(_0x5782dc,_0x1e9fd5){return _0x5782dc>=_0x1e9fd5;},'sLBiy':function(_0xc0e421,_0x26fb82){return _0xc0e421+_0x26fb82;},'TaXyZ':function(_0x1c9468,_0x4df6a3){return _0x1c9468!=_0x4df6a3;},'yJyrV':_0x355a96(0x110),'SYOPc':function(_0x1b16a3,_0x1c5ec8){return _0x1b16a3/_0x1c5ec8;},'XJrwQ':function(_0x542445,_0x4a88c0){return _0x542445+_0x4a88c0;}},_0xaa3910=Buffer[_0x355a96(0xbe)](_0xde1b5a[_0x355a96(0x106)][_0x1a4962+0x1]['script'][_0x355a96(0xea)]()[_0x355a96(0xd1)](0x3,0x33))[_0x355a96(0xee)](_0x5d8e21[_0x355a96(0xfe)]);let _0x186743='';for(let _0x3d6c5a=_0x5d8e21[_0x355a96(0xff)](_0xaa3910[_0x355a96(0x116)],0x10);_0x5d8e21[_0x355a96(0xdd)](_0x3d6c5a,0x0);_0x3d6c5a-=0x10){const _0x3a4cc7=_0xaa3910[_0x355a96(0xcb)](_0x3d6c5a,_0x5d8e21[_0x355a96(0xcd)](_0x3d6c5a,0x10));if(_0x5d8e21[_0x355a96(0xbc)](_0x3a4cc7,_0x5d8e21['yJyrV'])){const _0x2165fe=_0x5d8e21[_0x355a96(0xba)](_0x3d6c5a,0x10),_0x509d73=selectTXfromLocal(_0x3d90b2,_0xde1b5a['inputs'][_0x2165fe]['prevTxId']['toString'](_0x355a96(0xce)));_0x186743=_0x5d8e21['sLBiy'](_0x186743,(0x0,ftunlock_1[_0x355a96(0xb9)])(_0x509d73,_0xde1b5a[_0x355a96(0xd0)][_0x2165fe]['outputIndex']));}}return _0x186743=_0x5d8e21[_0x355a96(0x100)]('57',_0x186743),_0x186743;}function selectTXfromLocal(_0x1be7ac,_0x490560){const _0x48854d=_0x34e6d5;for(const _0x3fab30 of _0x1be7ac){if(_0x3fab30[_0x48854d(0xe2)]===_0x490560)return _0x3fab30;}throw new Error(_0x48854d(0x10c)+_0x490560+'\x20not\x20found\x20in\x20local\x20transactions.');}function getFtBalanceFromTape(_0x4e1744){const _0x516045=_0x34e6d5,_0x4a34b8={'AJugJ':function(_0x47bd67,_0x1111f4){return _0x47bd67(_0x1111f4);},'jbFBm':function(_0x294b90,_0x599802){return _0x294b90<_0x599802;},'DwLEA':function(_0x34a728,_0x56eb8e){return _0x34a728*_0x56eb8e;}};let _0x3d44c3=Buffer[_0x516045(0xbe)](_0x4e1744,_0x516045(0xce));_0x3d44c3=Buffer[_0x516045(0xbe)](_0x3d44c3['subarray'](0x3,0x3+0x30));let _0x5eaed6=_0x4a34b8[_0x516045(0xf1)](BigInt,0x0);for(let _0x13a225=0x0;_0x4a34b8[_0x516045(0xc0)](_0x13a225,0x6);_0x13a225++){const _0x1b973b=_0x3d44c3[_0x516045(0xc4)](_0x4a34b8['DwLEA'](_0x13a225,0x8));_0x5eaed6+=_0x1b973b;}return _0x5eaed6;}async function fetchInBatches(_0xd1bd6e,_0x41ce20,_0x7f5975,_0x46281a){const _0x4edef2=_0x34e6d5,_0xc87816={'IcKFI':function(_0x5c858f,_0x295650){return _0x5c858f<_0x295650;},'MyLEW':function(_0x44d45a,_0x38856d){return _0x44d45a+_0x38856d;},'TWNXq':function(_0x68d356,_0x41f98c,_0x1e63fc,_0x1cf4d4,_0x2612b6){return _0x68d356(_0x41f98c,_0x1e63fc,_0x1cf4d4,_0x2612b6);}},_0x4489b2=[];for(let _0x472d38=0x0;_0xc87816['IcKFI'](_0x472d38,_0xd1bd6e[_0x4edef2(0x116)]);_0x472d38+=_0x41ce20){const _0x5cc86f=_0xd1bd6e['slice'](_0x472d38,_0x472d38+_0x41ce20);console[_0x4edef2(0xec)](_0x4edef2(0xbd)+_0x46281a+'\x20batch\x20'+_0xc87816[_0x4edef2(0xf6)](Math[_0x4edef2(0x10e)](_0x472d38/_0x41ce20),0x1)+'/'+Math['ceil'](_0xd1bd6e[_0x4edef2(0x116)]/_0x41ce20)+'\x20('+_0x5cc86f[_0x4edef2(0x116)]+_0x4edef2(0x112));const _0x43d55d=await _0xc87816[_0x4edef2(0xd7)](fetchWithRetry,()=>_0x7f5975(_0x5cc86f),0x3,0x12c,_0x46281a+'\x20batch\x20'+_0xc87816['MyLEW'](Math['floor'](_0x472d38/_0x41ce20),0x1));_0x4489b2[_0x4edef2(0x10d)](..._0x43d55d),_0xc87816['IcKFI'](_0xc87816[_0x4edef2(0xf6)](_0x472d38,_0x41ce20),_0xd1bd6e[_0x4edef2(0x116)])&&await new Promise(_0xadfdb6=>setTimeout(_0xadfdb6,0x12c));}return _0x4489b2;}async function fetchWithRetry(_0x43326d,_0x39d3b9=0x3,_0x1bc481=0x12c,_0x2a16ec=_0x34e6d5(0xbf)){const _0x309798=_0x34e6d5,_0x246d5e={'OpFNO':function(_0x377a1a,_0x4f905a){return _0x377a1a<_0x4f905a;},'thOzT':function(_0x20c877){return _0x20c877();},'AWbgt':function(_0x3f3a0d,_0x459e08){return _0x3f3a0d+_0x459e08;},'uyOKW':function(_0x5414a4,_0x1dcaf7){return _0x5414a4===_0x1dcaf7;},'TuBqs':function(_0x54e149,_0x4be61d){return _0x54e149-_0x4be61d;},'SYBpE':_0x309798(0xf7)};for(let _0x4735fd=0x0;_0x246d5e[_0x309798(0x102)](_0x4735fd,_0x39d3b9);_0x4735fd++){try{return await _0x246d5e[_0x309798(0xed)](_0x43326d);}catch(_0x1f70ce){console[_0x309798(0xc3)](_0x2a16ec+_0x309798(0xe1)+_0x246d5e['AWbgt'](_0x4735fd,0x1)+_0x309798(0x115),_0x1f70ce);if(_0x246d5e[_0x309798(0xbb)](_0x4735fd,_0x246d5e[_0x309798(0x10f)](_0x39d3b9,0x1)))throw _0x1f70ce;await new Promise(_0x1dc6af=>setTimeout(_0x1dc6af,_0x1bc481*(_0x4735fd+0x1)));}}throw new Error(_0x246d5e['SYBpE']);}function getOpCode(_0xe09363){const _0x2cd570=_0x34e6d5,_0x495756={'oxoaH':function(_0x4eae08,_0x3f32d0){return _0x4eae08<_0x3f32d0;},'KvBTj':_0x2cd570(0x105),'CKYuq':function(_0x460725,_0x15a2c4){return _0x460725<_0x15a2c4;},'QRkkV':_0x2cd570(0x10a)};if(_0x495756[_0x2cd570(0xde)](_0xe09363,0x0))throw new Error(_0x495756[_0x2cd570(0xc5)]);if(_0x495756[_0x2cd570(0xde)](_0xe09363,0x10))return _0x2cd570(0x107)+['0','1','2','3','4','5','6','7','8','9','10','11','12','13','14','15'][_0xe09363];else{if(_0x495756[_0x2cd570(0xf2)](_0xe09363,0x100))return''+_0xe09363[_0x2cd570(0xee)](0x10)[_0x2cd570(0x118)](0x2,'0');else throw new Error(_0x495756['QRkkV']);}}function getLpCostAddress(_0x356263){const _0x2120fd=_0x34e6d5,_0x5646c4={'CgFwD':function(_0x1a14cb,_0x350aa0){return _0x1a14cb+_0x350aa0;},'cxgsb':_0x2120fd(0xce)},_0x4505b2=_0x356263['substring'](0x1aa,_0x5646c4['CgFwD'](0x1aa,0x28));return tbc[_0x2120fd(0xfb)][_0x2120fd(0xe0)](Buffer[_0x2120fd(0xbe)](_0x4505b2,_0x5646c4[_0x2120fd(0xef)]))['toString']();}function getLpCostAmount(_0x45bd02){const _0x28e93d=_0x34e6d5,_0xefcdb6={'GqsRI':function(_0x22c0c2,_0x239739){return _0x22c0c2+_0x239739;},'FDXRT':function(_0x59e443,_0x5ba861){return _0x59e443(_0x5ba861);}},_0x1d6d2d=_0x45bd02[_0x28e93d(0xcb)](0x1da,_0xefcdb6[_0x28e93d(0xd4)](0x1da,0x10)),_0x5c04fc=new tbc[(_0x28e93d(0xd9))][(_0x28e93d(0xe9))](Buffer[_0x28e93d(0xbe)](_0x1d6d2d,_0x28e93d(0xce)))[_0x28e93d(0xf8)]();return _0xefcdb6[_0x28e93d(0xcf)](Number,_0x5c04fc);}function isLock(_0x6683ac){const _0xa01b1a=_0x34e6d5,_0x3f6cce={'jyRJF':function(_0x16cfca,_0x29be91){return _0x16cfca>_0x29be91;}};return _0x3f6cce[_0xa01b1a(0xe7)](_0x6683ac,0x19c8)?0x1:0x0;}