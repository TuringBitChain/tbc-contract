'use strict';const _0x428618=_0x2e8e;(function(_0x5b8305,_0x795c67){const _0x2b9749=_0x2e8e,_0x4d78bc=_0x5b8305();while(!![]){try{const _0x2ced01=-parseInt(_0x2b9749(0x1d3))/0x1+-parseInt(_0x2b9749(0x1d1))/0x2*(-parseInt(_0x2b9749(0x1d9))/0x3)+-parseInt(_0x2b9749(0x1af))/0x4*(parseInt(_0x2b9749(0x1c8))/0x5)+parseInt(_0x2b9749(0x1b6))/0x6+-parseInt(_0x2b9749(0x1d8))/0x7*(-parseInt(_0x2b9749(0x1e0))/0x8)+parseInt(_0x2b9749(0x1e1))/0x9+parseInt(_0x2b9749(0x1d2))/0xa*(-parseInt(_0x2b9749(0x1aa))/0xb);if(_0x2ced01===_0x795c67)break;else _0x4d78bc['push'](_0x4d78bc['shift']());}catch(_0x5da792){_0x4d78bc['push'](_0x4d78bc['shift']());}}}(_0x2d39,0x22de3));function _0x2d39(){const _0x19a56a=['xcPQq','0000000000000000','warn','crgzs','WCKra','satoshis','outputIndex','toHex','jzfgc','length','toString','selectTXfromLocal','getFtBalanceFromTape','ZPUdr','script','yRCHF','DVzqX','14465LwKKWe','fetchWithRetry','\x20attempt\x20','ziOeO','\x20batch\x20','buildUTXO','./ftunlock','log','defineProperty','74utpAnT','1050cNmXES','114497BhhwSV','getPrePreTxdata','OmlwM','inputs','AIaVs','87829sRhRCf','13323lJLKKn','FnoJx','bxJHC','from','Output\x20at\x20index\x20','EpkTG','toBuffer','104VrndBq','762057Fljhbv','outputs','\x20items)','slice','pbPqB','buildFtPrePreTxData','\x20not\x20found\x20in\x20local\x20transactions.','19151rEOgqo','uzXjB','ANqVI','\x20failed:','subarray','276OWmDwP','floor','hash','prevTxId','Unreachable\x20code','hex','fetchInBatches','1365822PRuHvZ'];_0x2d39=function(){return _0x19a56a;};return _0x2d39();}Object[_0x428618(0x1d0)](exports,'__esModule',{'value':!![]}),exports[_0x428618(0x1cd)]=buildUTXO,exports[_0x428618(0x1a8)]=buildFtPrePreTxData,exports[_0x428618(0x1c2)]=selectTXfromLocal,exports[_0x428618(0x1c3)]=getFtBalanceFromTape,exports[_0x428618(0x1b5)]=fetchInBatches,exports[_0x428618(0x1c9)]=fetchWithRetry;const ftunlock_1=require(_0x428618(0x1ce));function buildUTXO(_0x53b5e9,_0x2a0a64,_0x1d61c1){const _0x3ba0c0=_0x428618,_0x43a3cb={'FnoJx':function(_0x1b46ac,_0xf8c8ae){return _0x1b46ac===_0xf8c8ae;},'xcPQq':function(_0x3c62d6,_0x2d01d6){return _0x3c62d6(_0x2d01d6);},'crgzs':function(_0x41deb9,_0x3728c4){return _0x41deb9+_0x3728c4;}};let _0x134a11;_0x43a3cb[_0x3ba0c0(0x1da)](_0x1d61c1,!![])?_0x134a11=_0x43a3cb[_0x3ba0c0(0x1b7)](getFtBalanceFromTape,_0x53b5e9[_0x3ba0c0(0x1e2)][_0x43a3cb[_0x3ba0c0(0x1ba)](_0x2a0a64,0x1)][_0x3ba0c0(0x1c5)][_0x3ba0c0(0x1be)]()):_0x134a11=0x0n;const _0x12277d=_0x53b5e9[_0x3ba0c0(0x1e2)][_0x2a0a64];if(!_0x12277d)throw new Error(_0x3ba0c0(0x1dd)+_0x2a0a64+'\x20does\x20not\x20exist\x20in\x20the\x20transaction.');return{'txId':_0x53b5e9[_0x3ba0c0(0x1b1)],'outputIndex':_0x2a0a64,'script':_0x12277d[_0x3ba0c0(0x1c5)]['toHex'](),'satoshis':_0x12277d[_0x3ba0c0(0x1bc)],'ftBalance':_0x134a11};}function buildFtPrePreTxData(_0x375c4b,_0x2527d3,_0x4563b4){const _0x13e5a8=_0x428618,_0x2724e4={'ANqVI':function(_0x238c3d,_0x381ef7){return _0x238c3d+_0x381ef7;},'pPTUw':function(_0x28d099,_0x121486){return _0x28d099!=_0x121486;},'igorR':_0x13e5a8(0x1b4)},_0x2dbd9c=Buffer[_0x13e5a8(0x1dc)](_0x375c4b[_0x13e5a8(0x1e2)][_0x2724e4[_0x13e5a8(0x1ac)](_0x2527d3,0x1)][_0x13e5a8(0x1c5)][_0x13e5a8(0x1df)]()[_0x13e5a8(0x1ae)](0x3,0x33))[_0x13e5a8(0x1c1)](_0x13e5a8(0x1b4));let _0x6d3595='';for(let _0x580647=_0x2dbd9c[_0x13e5a8(0x1c0)]-0x10;_0x580647>=0x0;_0x580647-=0x10){const _0x560d6f=_0x2dbd9c['substring'](_0x580647,_0x580647+0x10);if(_0x2724e4['pPTUw'](_0x560d6f,_0x13e5a8(0x1b8))){const _0x532277=_0x580647/0x10,_0x46addc=selectTXfromLocal(_0x4563b4,_0x375c4b['inputs'][_0x532277][_0x13e5a8(0x1b2)]['toString'](_0x2724e4['igorR']));_0x6d3595=_0x2724e4[_0x13e5a8(0x1ac)](_0x6d3595,(0x0,ftunlock_1[_0x13e5a8(0x1d4)])(_0x46addc,_0x375c4b[_0x13e5a8(0x1d6)][_0x532277][_0x13e5a8(0x1bd)]));}}return _0x6d3595=_0x2724e4['ANqVI']('57',_0x6d3595),_0x6d3595;}function _0x2e8e(_0x52e18b,_0x4a7497){const _0x2d391b=_0x2d39();return _0x2e8e=function(_0x2e8eb5,_0x56a1ef){_0x2e8eb5=_0x2e8eb5-0x1a8;let _0x513111=_0x2d391b[_0x2e8eb5];return _0x513111;},_0x2e8e(_0x52e18b,_0x4a7497);}function selectTXfromLocal(_0x2064ef,_0x5b8e57){const _0x464dc8=_0x428618,_0x12e4d6={'EpkTG':function(_0x29fb1f,_0x2df651){return _0x29fb1f===_0x2df651;}};for(const _0x5d09bf of _0x2064ef){if(_0x12e4d6[_0x464dc8(0x1de)](_0x5d09bf[_0x464dc8(0x1b1)],_0x5b8e57))return _0x5d09bf;}throw new Error('Transaction\x20with\x20ID\x20'+_0x5b8e57+_0x464dc8(0x1a9));}function getFtBalanceFromTape(_0x1588e8){const _0x3469f6=_0x428618,_0x40301b={'bxJHC':function(_0x545bf0,_0x4f4e7b){return _0x545bf0(_0x4f4e7b);},'OmlwM':function(_0x28c725,_0x184410){return _0x28c725<_0x184410;},'jzfgc':function(_0x5ee150,_0x475c00){return _0x5ee150*_0x475c00;}};let _0x4c21e2=Buffer['from'](_0x1588e8,'hex');_0x4c21e2=Buffer['from'](_0x4c21e2['subarray'](0x3,0x3+0x30));let _0x57441c=_0x40301b[_0x3469f6(0x1db)](BigInt,0x0);for(let _0x539f9c=0x0;_0x40301b[_0x3469f6(0x1d5)](_0x539f9c,0x6);_0x539f9c++){const _0x4c8287=_0x4c21e2['readBigUInt64LE'](_0x40301b[_0x3469f6(0x1bf)](_0x539f9c,0x8));_0x57441c+=_0x4c8287;}return _0x57441c;}async function fetchInBatches(_0x3d855e,_0x139b7c,_0x1fb123,_0x55324d){const _0x55e561=_0x428618,_0x378c29={'feKzM':function(_0x24612c,_0x4dc599){return _0x24612c<_0x4dc599;},'pbPqB':function(_0x3f3e9e,_0x40f197){return _0x3f3e9e+_0x40f197;},'ZPUdr':function(_0x3d01c0,_0x1a54f6){return _0x3d01c0/_0x1a54f6;},'eHfEM':function(_0x4fd162,_0x4ad2da){return _0x4fd162/_0x4ad2da;},'ziOeO':function(_0xd938e2,_0x2ac360){return _0xd938e2/_0x2ac360;}},_0x24d663=[];for(let _0x35241d=0x0;_0x378c29['feKzM'](_0x35241d,_0x3d855e[_0x55e561(0x1c0)]);_0x35241d+=_0x139b7c){const _0x372f52=_0x3d855e[_0x55e561(0x1e4)](_0x35241d,_0x378c29[_0x55e561(0x1e5)](_0x35241d,_0x139b7c));console[_0x55e561(0x1cf)]('Processing\x20'+_0x55324d+_0x55e561(0x1cc)+(Math[_0x55e561(0x1b0)](_0x378c29[_0x55e561(0x1c4)](_0x35241d,_0x139b7c))+0x1)+'/'+Math['ceil'](_0x378c29['eHfEM'](_0x3d855e['length'],_0x139b7c))+'\x20('+_0x372f52['length']+_0x55e561(0x1e3));const _0x3a429c=await fetchWithRetry(()=>_0x1fb123(_0x372f52),0x3,0x12c,_0x55324d+_0x55e561(0x1cc)+_0x378c29[_0x55e561(0x1e5)](Math[_0x55e561(0x1b0)](_0x378c29[_0x55e561(0x1cb)](_0x35241d,_0x139b7c)),0x1));_0x24d663['push'](..._0x3a429c),_0x35241d+_0x139b7c<_0x3d855e[_0x55e561(0x1c0)]&&await new Promise(_0x13be25=>setTimeout(_0x13be25,0x12c));}return _0x24d663;}async function fetchWithRetry(_0x443cb1,_0x51353d=0x3,_0x50079f=0x12c,_0xfee3d3='API\x20call'){const _0x260a61=_0x428618,_0xc9e4dd={'uzXjB':function(_0x5480bc,_0xf78434){return _0x5480bc<_0xf78434;},'DVzqX':function(_0x44c5d9){return _0x44c5d9();},'yRCHF':function(_0x5beac0,_0x59fab9){return _0x5beac0===_0x59fab9;},'WCKra':function(_0x23b70c,_0x32837e){return _0x23b70c-_0x32837e;},'AIaVs':_0x260a61(0x1b3)};for(let _0x3c27cc=0x0;_0xc9e4dd[_0x260a61(0x1ab)](_0x3c27cc,_0x51353d);_0x3c27cc++){try{return await _0xc9e4dd[_0x260a61(0x1c7)](_0x443cb1);}catch(_0x236bd0){console[_0x260a61(0x1b9)](_0xfee3d3+_0x260a61(0x1ca)+(_0x3c27cc+0x1)+_0x260a61(0x1ad),_0x236bd0);if(_0xc9e4dd[_0x260a61(0x1c6)](_0x3c27cc,_0xc9e4dd[_0x260a61(0x1bb)](_0x51353d,0x1)))throw _0x236bd0;await new Promise(_0x28214a=>setTimeout(_0x28214a,_0x50079f*(_0x3c27cc+0x1)));}}throw new Error(_0xc9e4dd[_0x260a61(0x1d7)]);}